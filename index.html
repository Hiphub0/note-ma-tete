<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le Noteur de T√™te V2</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #2c3e50;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            text-align: center;
            padding: 10px;
            box-sizing: border-box;
        }

        h1 { margin-bottom: 10px; font-size: 1.5rem; }

        .camera-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            height: 300px; /* Hauteur fixe pour √©viter les sauts */
            border: 4px solid #ecf0f1;
            border-radius: 15px;
            overflow: hidden;
            background: #000;
            margin-bottom: 15px;
        }

        video {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Remplit bien le cadre */
        }

        /* --- S√âLECTEUR DE GENRE --- */
        .gender-selector {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            background: rgba(0,0,0,0.2);
            padding: 5px;
            border-radius: 50px;
        }

        .gender-btn {
            background: transparent;
            border: 2px solid transparent;
            color: #bdc3c7;
            padding: 10px 20px;
            font-size: 1rem;
            cursor: pointer;
            border-radius: 30px;
            transition: all 0.3s ease;
        }

        .gender-btn.active {
            background-color: #3498db;
            color: white;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(52, 152, 219, 0.4);
        }

        .gender-btn.active.femme {
            background-color: #e84393; /* Rose pour femme */
            box-shadow: 0 4px 10px rgba(232, 67, 147, 0.4);
        }

        /* --- BOUTON PHOTO --- */
        #snap {
            padding: 15px 40px;
            font-size: 1.2rem;
            background-color: #27ae60;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: transform 0.1s;
        }

        #snap:active { transform: scale(0.95); }

        /* --- R√âSULTATS --- */
        #result {
            margin-top: 20px;
            min-height: 100px;
        }

        .score {
            font-size: 4rem;
            font-weight: 800;
            color: #f1c40f;
            display: block;
            text-shadow: 2px 2px 0px #000;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .comment {
            font-size: 1.3rem;
            margin-top: 10px;
            font-weight: 300;
        }

        .loader {
            display: none;
            font-size: 1.2rem;
            color: #bdc3c7;
        }

        @keyframes popIn {
            0% { transform: scale(0); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>

    <h1>‚ú® Note mon Charisme ‚ú®</h1>

    <div class="camera-container">
        <video id="video" autoplay playsinline muted></video>
    </div>

    <div class="gender-selector">
        <button class="gender-btn active" onclick="setGender('homme', this)">Homme üë®</button>
        <button class="gender-btn" onclick="setGender('femme', this)">Femme üë©</button>
    </div>

    <button id="snap">NOTER MA T√äTE</button>

    <div id="result">
        <div class="loader" id="loader">Calcul du charme... ‚è≥</div>
        <div id="scoreDisplay"></div>
    </div>

    <script>
        const video = document.getElementById('video');
        const button = document.getElementById('snap');
        const loader = document.getElementById('loader');
        const scoreDisplay = document.getElementById('scoreDisplay');
        
        let currentGender = 'homme'; // Par d√©faut

        // Commentaires personnalis√©s selon le genre
        const comments = {
            homme: {
                mid: ["Pas mal du tout, mon pote.", "Y'a du potentiel.", "Solide.", "Propre."],
                high: ["Quel BG !", "Le futur James Bond ?", "Incroyable charisme.", "Roi de la soir√©e !"]
            },
            femme: {
                mid: ["Tr√®s charmante !", "Joli sourire.", "Rayonnante.", "Tr√®s mignonne."],
                high: ["Une vraie d√©esse !", "Quelle √©l√©gance !", "Magnifique !", "Top mod√®le !", "Quelle pain"]
            }
        };

        // 1. Gestion du genre
        function setGender(gender, btnElement) {
            currentGender = gender;
            
            // Gestion visuelle des boutons
            document.querySelectorAll('.gender-btn').forEach(b => {
                b.classList.remove('active');
                b.classList.remove('femme'); // Retirer la couleur rose
            });
            
            btnElement.classList.add('active');
            if(gender === 'femme') {
                btnElement.classList.add('femme'); // Ajouter la couleur rose
            }
        }

        // 2. Activer la cam√©ra
        async function startCamera() {
            try {
                // { facingMode: "user" } force la cam√©ra selfie sur mobile
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: "user" } 
                });
                video.srcObject = stream;
            } catch (err) {
                scoreDisplay.innerHTML = "‚ö†Ô∏è Cam√©ra bloqu√©e. Active-la dans les r√©glages.";
            }
        }

        // 3. Bouton Photo
        button.addEventListener('click', () => {
            scoreDisplay.innerHTML = '';
            loader.style.display = 'block';
            button.disabled = true;
            button.style.opacity = "0.5";

            // Petit d√©lai pour le suspense
            setTimeout(() => {
                generateScore();
                loader.style.display = 'none';
                button.disabled = false;
                button.style.opacity = "1";
            }, 1000);
        });

        // 4. G√©n√©ration du score (5 √† 10)
        function generateScore() {
            // Math.random() * 6 donne un chiffre entre 0 et 5.99
            // + 5 d√©cale le tout pour avoir entre 5 et 10.99
            const score = Math.floor(Math.random() * 6) + 5;
            
            let commentList;
            
            // Choix des commentaires (Mid = 5, 6, 7 / High = 8, 9, 10)
            if (score <= 7) {
                commentList = comments[currentGender].mid;
            } else {
                commentList = comments[currentGender].high;
            }

            const randomComment = commentList[Math.floor(Math.random() * commentList.length)];

            scoreDisplay.innerHTML = `
                <span class="score">${score}/10</span>
                <div class="comment">${randomComment}</div>
            `;
        }

        startCamera();
    </script>

</body>
</html>